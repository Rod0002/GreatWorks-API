warning: in the working copy of 'package-lock.json', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'routes/usuarios.js', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/controllers/usuarioControllers.js b/controllers/usuarioControllers.js[m
[1mdeleted file mode 100644[m
[1mindex 6cc97f6..0000000[m
[1m--- a/controllers/usuarioControllers.js[m
[1m+++ /dev/null[m
[36m@@ -1,76 +0,0 @@[m
[31m-// Importa o m√≥dulo de conex√£o com o banco de dados[m
[31m-const db = require('../models/db');[m
[31m-[m
[31m-// Importa o m√≥dulo bcryptjs para encripta√ß√£o de senhas[m
[31m-const bcrypt = require('bcryptjs');[m
[31m-[m
[31m-// Importa o m√≥dulo jsonwebtoken (JWT) para cria√ß√£o de tokens[m
[31m-const jwt = require('jsonwebtoken');[m
[31m-[m
[31m-// Definindo a chave secreta para JWT. O ideal √© colocar isso em um arquivo .env[m
[31m-const JWT_SECRET = process.env.JWT_SECRET || 'segredo123'; // Coloque isso no .env depois[m
[31m-[m
[31m-// ===============================[m
[31m-// FUN√á√ÉO: Registrar um novo usu√°rio[m
[31m-// ===============================[m
[31m-exports.registrar = (req, res) => {[m
[31m-  // Desestrutura os dados recebidos no corpo da requisi√ß√£o (nome, email, senha)[m
[31m-  const { nome, email, senha } = req.body;[m
[31m-[m
[31m-  // Encripta a senha recebida usando bcrypt[m
[31m-  bcrypt.hash(senha, 10, (err, hash) => {[m
[31m-    if (err) [m
[31m-      // Se houver erro na encripta√ß√£o, retorna erro 500 (erro interno do servidor)[m
[31m-      return res.status(500).json({ erro: err });[m
[31m-[m
[31m-    // Query SQL para inserir o novo usu√°rio no banco de dados[m
[31m-    const query = 'INSERT INTO tb_usuario (nome, email, senha) VALUES (?, ?, ?)';[m
[31m-[m
[31m-    // Executa a query para inserir o novo usu√°rio[m
[31m-    db.query(query, [nome, email, hash], (err, result) => {[m
[31m-      if (err) [m
[31m-        // Se o email j√° existe ou houver outro erro na inser√ß√£o, retorna erro 500[m
[31m-        return res.status(500).json({ erro: 'Email j√° existe ou erro ao inserir' });[m
[31m-[m
[31m-      // Retorna mensagem de sucesso com status 201 (criado)[m
[31m-      res.status(201).json({ msg: 'Usu√°rio registrado com sucesso!' });[m
[31m-    });[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-// ===============================[m
[31m-// FUN√á√ÉO: Login do usu√°rio[m
[31m-// ===============================[m
[31m-exports.login = (req, res) => {[m
[31m-  // Desestrutura os dados recebidos no corpo da requisi√ß√£o (email e senha)[m
[31m-  const { email, senha } = req.body;[m
[31m-[m
[31m-  // Query SQL para buscar o usu√°rio no banco de dados pelo email[m
[31m-  const query = 'SELECT * FROM tb_usuario WHERE email = ?';[m
[31m-[m
[31m-  // Executa a query para procurar o usu√°rio[m
[31m-  db.query(query, [email], (err, results) => {[m
[31m-    if (err || results.length === 0) {[m
[31m-      // Se n√£o encontrar o usu√°rio ou houver erro, retorna erro 401 (n√£o autorizado)[m
[31m-      return res.status(401).json({ erro: 'Usu√°rio n√£o encontrado' });[m
[31m-    }[m
[31m-[m
[31m-    // Se o usu√°rio for encontrado, armazena a primeira linha do resultado[m
[31m-    const usuario = results[0];[m
[31m-[m
[31m-    // Compara a senha recebida com a senha armazenada no banco (encriptada)[m
[31m-    bcrypt.compare(senha, usuario.senha, (err, match) => {[m
[31m-      if (!match) [m
[31m-        // Se as senhas n√£o coincidirem, retorna erro 401 (n√£o autorizado)[m
[31m-        return res.status(401).json({ erro: 'Senha incorreta' });[m
[31m-[m
[31m-      // Se a senha for correta, cria um token JWT[m
[31m-      const token = jwt.sign({ id: usuario.id_usuario, email: usuario.email }, JWT_SECRET, {[m
[31m-        expiresIn: '2h', // O token expira em 2 horas[m
[31m-      });[m
[31m-[m
[31m-      // Retorna mensagem de sucesso com o token JWT gerado[m
[31m-      res.json({ msg: 'Login realizado', token });[m
[31m-    });[m
[31m-  });[m
[31m-};[m
[1mdiff --git a/package-lock.json b/package-lock.json[m
[1mindex 7a54930..8fb71b3 100644[m
[1m--- a/package-lock.json[m
[1m+++ b/package-lock.json[m
[36m@@ -289,9 +289,9 @@[m
       }[m
     },[m
     "node_modules/dotenv": {[m
[31m-      "version": "16.4.7",[m
[31m-      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.4.7.tgz",[m
[31m-      "integrity": "sha512-47qPchRCykZC03FhkYAhrvwU4xDBFIj1QPqaarj6mdM/hgUzfPHcpkHJOn3mJAufFeeAxAzeGsr5X0M4k6fLZQ==",[m
[32m+[m[32m      "version": "16.5.0",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.5.0.tgz",[m
[32m+[m[32m      "integrity": "sha512-m/C+AwOAr9/W1UOIZUo232ejMNnJAJtYQjUbHoNTBNTJSvqzzDh7vnrei3o3r3m9blf6ZoDkvcw0VmozNRFJxg==",[m
       "license": "BSD-2-Clause",[m
       "engines": {[m
         "node": ">=12"[m
[36m@@ -796,9 +796,9 @@[m
       "license": "MIT"[m
     },[m
     "node_modules/long": {[m
[31m-      "version": "5.3.1",[m
[31m-      "resolved": "https://registry.npmjs.org/long/-/long-5.3.1.tgz",[m
[31m-      "integrity": "sha512-ka87Jz3gcx/I7Hal94xaN2tZEOPoUOEVftkQqZx2EeQRN7LGdfLlI3FvZ+7WDplm+vK2Urx9ULrvSowtdCieng==",[m
[32m+[m[32m      "version": "5.3.2",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",[m
[32m+[m[32m      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",[m
       "license": "Apache-2.0"[m
     },[m
     "node_modules/lru-cache": {[m
[36m@@ -937,9 +937,9 @@[m
       }[m
     },[m
     "node_modules/nodemon": {[m
[31m-      "version": "3.1.9",[m
[31m-      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-3.1.9.tgz",[m
[31m-      "integrity": "sha512-hdr1oIb2p6ZSxu3PB2JWWYS7ZQ0qvaZsc3hK8DR8f02kRzc8rjYmxAIvdz+aYC+8F2IjNaB7HMcSDg8nQpJxyg==",[m
[32m+[m[32m      "version": "3.1.10",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-3.1.10.tgz",[m
[32m+[m[32m      "integrity": "sha512-WDjw3pJ0/0jMFmyNDp3gvY2YizjLmmOUQo6DEBY+JgdvW/yQ9mEeSw6H5ythl5Ny2ytb7f9C2nIbjSxMNzbJXw==",[m
       "dev": true,[m
       "license": "MIT",[m
       "dependencies": {[m
[1mdiff --git a/routes/usuarios.js b/routes/usuarios.js[m
[1mindex 696735f..4247137 100644[m
[1m--- a/routes/usuarios.js[m
[1m+++ b/routes/usuarios.js[m
[36m@@ -1,14 +1,11 @@[m
[31m-// Importa o m√≥dulo Express, utilizado para cria√ß√£o de rotas[m
[32m+[m[32m// Importa o m√≥dulo Express[m
 const express = require('express');[m
 [m
 // Cria um novo roteador do Express para agrupar as rotas de usu√°rio[m
 const router = express.Router();[m
 [m
 // Importa o controller que cont√©m a l√≥gica para registro e login de usu√°rios[m
[31m-const usuarioController = require('../controllers/usuarioControllers.js');[m
[31m-[m
[31m-// (Opcional) Importa o middleware de autentica√ß√£o com JWT ‚Äî pode ser usado para proteger rotas futuras[m
[31m-const autenticarToken = require('../middleware/auth.js');[m
[32m+[m[32mconst usuarioController = require('../controllers/usuarioController.js');[m
 [m
 // Rota POST /register[m
 // Registra um novo usu√°rio no sistema (recebe nome, email e senha)[m
